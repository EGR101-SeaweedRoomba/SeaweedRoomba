<!DOCTYPE html>
<html>
  <head>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/design.css') }}">
    <script src="jquery-3.5.1.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="{{url_for('static', filename='getData.js')}}"></script>
  <body>
    <div id="div1">
      <center id="Data"> Test </center>
      <script>
      writeData();
      setInterval(writeData, 600);
      
        function writeData(){
          document.getElementById("Data").innerHTML = getData();
        }
      </script>
    </div>
    <div id="div2">
      <center> Yaw </center>
      <div style = "position:relative; left:230px; top:2px;">
        <svg width="300px" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 200 200">
          <circle cx="100" cy="100" r="80" fill="firebrick"></circle>
          <line id="line" x1="20" y1="100" x2="100" y2="100" stroke-width="2" stroke="black"></line>
        </svg>
        <script>
          var rotateJump = 10;
          var line = document.getElementById("line");

          var i = 0;
        setInterval(function() {
          i = getData();
            line.setAttribute("transform", "rotate(" + i + ", 100, 100)");
          }, 25);
        </script>
      </div>
    </div>
    <div id="div3">
      <div id="chart" style="width:760px;height:400px;"></div>
      <script>
        Plotly.plot('chart',[{
          y:[getData()],
          type:'line'
        }]);
        var cnt = 0;

            setInterval(function(){

                Plotly.extendTraces('chart',{ y:[[getData()]]}, [0]);
                cnt++;
                if(cnt > 300) {
                    Plotly.relayout('chart',{
                        xaxis: {
                            range: [cnt-300,cnt]
                        }
                    });
                }
            },15);
      </script>
    </div>
    <div id="div4">
      <script>
          function smth(str) {
            return document.body.appendChild(document.createTextNode(str));
          }
      </script>
    </div>

  </body>
</html>